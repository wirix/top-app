import { GetStaticProps } from 'next';
import Head from 'next/head';
import React, { useState } from 'react';
import { Button, Input, Htag, P, Rating, Tag, Textarea } from '../components';
import { withLayout } from '../layout/Layout';
import axios from 'axios';
import { MenuItem } from '../interfaces/menu.inteface';
import { API } from '../helpers/api';

function Home(): JSX.Element {
  const [rating, setRating] = useState<number>(4);
  // мы всегда можем исп дефолтные 404 500, а также определять свои страницы
  // return <Error statusCode={404} />;

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
        <link rel="preconnect" href="https://fonts.googleapis.com" /> 
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;700&display=swap" />
      </Head>
      <main>
        <Htag tag='h1'>
          Текст
        </Htag>
        <Button appearance='primary' arrow='right'>Кнопка</Button>
        <Button appearance='ghost' arrow='down'>Подробнее</Button>
        <P fontSize='s'>
          Lorem ipsum dolor sit, amet consectetur adipisicing elit. Incidunt, ipsam aut quibusdam fugiat tempora vero labore quasi dolor sit expedita, omnis magni exercitationem quos. Sequi sunt ad excepturi mollitia, vel quae aut facilis dicta nemo dignissimos. Quisquam architecto doloribus praesentium.
        </P>
        <Tag color={'green'}>1000rub</Tag>
        <Tag color={'primary'}>Начало</Tag>
        <Tag color={'red'}>hh.ru</Tag>
        <Tag color={'gray'}>01</Tag>
        <Tag color={'ghost'}>что</Tag>
        <Rating rating={rating} isEditable setRating={setRating} />
        <Input placeholder='Комментарий'/>
        <Textarea placeholder='текстареа' />
      </main>
    </>
  );
}

export default withLayout(Home);

export const getStaticProps: GetStaticProps<HomeProps> = async () => {
  const firstCategory = 0;
  const { data: menu } = await axios.post<MenuItem[]>(API.topPage.find, {
    firstCategory
  });
  return {
    props: {
      menu,
      firstCategory
    }
  };
};

interface HomeProps extends Record<string, unknown> {
  menu: MenuItem[];
  firstCategory: number;
}